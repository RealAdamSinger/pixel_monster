<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="description" content="Pixel monster : ">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="./modules/slate/dist/js/slate.js"></script>
	<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
	<link rel="stylesheet" type="text/css" media="screen" href="./modules/slate/dist/css/slate.min.css">

	<title>Pixel monster</title>
</head>

<body>
	<div id="main" style="width:100%;">
		<!-- HEADER -->
		<div style="width:100%; height: 100px; background-color: #222; vertical-align:middle;position:relative;">
			<h1 id="project_title" style="color: #eee; display:inline-block; height:100%; padding:3px; vertical-align:middle; font-weight:bold;">
				Pixel Monster
				</h1>
			<div style="border: 1px solid #aaa;display:inline-block;">
				<div style="border: 5px solid #000;display:inline-block;">
					<div id="littleBox" style="display:inline-block; vertical-align:top;background:#aaa;">
					</div>
				</div>
			</div>
			&nbsp;
			<div style="border: 1px solid #aaa;display:inline-block;">
				<div style="border: 5px solid #000;display:inline-block;">
					<div id="littleBoxBW" style="display:inline-block; vertical-align:top;background:#aaa;">
					</div>
				</div>
			</div>
			<div style="width:90%; height: 80px; position:absolute; color: #eee; text-align: right; right:10px; top:10px; padding-right:5px;">
				<label>
					Color Picker</br>
					<input id="color" type="text" class="item-color item-color-normal" name="color-1" value="0x000000">
				</label>
			</div>
		</div>

		<!-- MAIN CONTENT -->
		<div style="width: 100%; height:calc(100% - 100px); text-align: center; vertical-align:top;">
			<div style="width:calc(100% - 20px); height:calc(100% - 20px); overflow: scroll; text-align:center; display:inline-block;vertical-align:top;">
				<div id="monsterBox" style=" border: solid #222 1px; display:inline-block; white-space:nowrap;">
				</div>
			</div>
		</div>
		<script>
			$.cssHooks.backgroundColor = {
				get: function(elem) {
					if (elem.currentStyle){
						var bg = elem.currentStyle["backgroundColor"];
					} else if (window.getComputedStyle){
						var bg = document.defaultView.getComputedStyle(elem, null).getPropertyValue("background-color");
					}
					if (bg.search("rgb") == -1 || bg.search("rgba") != -1)
						return bg;
					else {
						bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
						function hex(x) {
							return ("0" + parseInt(x).toString(16)).slice(-2);
						}
						return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
					}
				}
			};
			
			var screenHeight = screen.height;
			var monsterBox = $("body").find("#monsterBox");
			var littleBox = $("body").find("#littleBox");
			var littleBoxBW = $("body").find("#littleBoxBW");
			var color = $("body").find("#color");
			for(var y=0; y<60; y++){
				for(var x=0; x<60; x++){	
					var pos = "x"+ x +"y"+ y;
					monsterBox.append("<div id='" + pos + "' style='width:40px; height:40px; display:inline-block;vertical-align:top;'></div>");
					littleBox.append("<div id='" + pos + "' style='width:1px; height:1px; display:inline-block;vertical-align:top;'></div>");
					littleBoxBW.append("<div id='" + pos + "' style='width:1px; height:1px; display:inline-block;vertical-align:top;'></div>");
					monsterBox.find("#"+pos).click(function(e) {
						var cell = $(e.target);
						if(cell.css("background-color").toLowerCase() != ("#" + color.val().substring(2)).toLowerCase()){
							cell.css({
								"background-color": "#" + color.val().substring(2)
							});	
							littleBox.children("#" + e.target.id).css({
								"background-color": "#" + color.val().substring(2)
							});	
						}else{
							cell.css({
								"background-color": "transparent"
							});
							littleBox.children("#" + e.target.id).css({
									"background-color": "transparent"
							});	
						}
					});
				}	
				monsterBox.append("</br>");
			}
			
			
				$("body").find('#main').css({ height: ($(window).innerHeight())});
				$(window).resize(function(){
					$("body").find('#main').css({ height: ($(window).innerHeight())});
				});
		</script>

</body>

</html>
